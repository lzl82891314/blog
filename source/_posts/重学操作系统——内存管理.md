---
title: 重学操作系统——内存管理
url_name: os-memory
hidden: true
date: 2021-09-25 11:24:07
categories:
  - 操作系统
tags:
  - 操作系统
  - 基础知识
---

内存管理操作系统的核心功能之一，主要管理用户程序从硬盘到内存的调度。这一部分学完之后，基本可以解答上一章说过的问题三

知识点：

1. 重定位寄存器记录 逻辑地址 --> 物理地址 之间转化的地址数量，比如逻辑地址 0-170，对应到物理地址是 100-270，那重定位寄存器里存放的就是 100
2. 界寄存器 还是上述的例子，界寄存器存放的就是进程的**最大逻辑地址** 170
3. 页号计算：逻辑地址 / 页面大小（取整），比如逻辑地址为 80，页面大小为 50，则其页号就是 1
4. 偏移量计算：逻辑地址 % 页面大小，同上页面偏移量是 30
5. 由于计算机是二进制的，所以操作系统为了方便计算页号以及偏移量，会把页面大小设置为 2 的整数次幂，比如 2^12=4K，则会有以下例子：32 位操作系统中，0 号页的地址空间应该是从 0~4095，换算为 2 进制为：`00000000000000000000 000000000000` ~ `00000000000000000000 111111111111`，同理，1 号页地址空间时 4096~8191，对应的二进制为 `00000000000000000001 000000000000` ~ `00000000000000000001 111111111111`，可以看出，前 20 位正好代表页号，后 12 位正好代表业内偏移量
6. TLB 就是一个高速缓存的寄存器，主要用于实现快表，快表就是内存寻址之前先访问的缓存，如果命中就了减少一次内存访问，其实现依赖于局部性原理：时间局部性，空间局部性。一次寻址需要访问两次内存，第一次访问内存中的页表，第二次访问真正的内存地址
